<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lmj.school.mapper.AdminMapper">

    <!--管理员登录-->
    <select id="loginAdmin" resultType="com.lmj.school.model.Admin">
        select id,adminName from admin where adminName=#{adminName} and adminPassword=#{adminPassword}
    </select>
    <!--管理员录入学生信息-->
    <insert id="saveStudent" >
        insert into student values(null,#{studentName},#{major},#{sex},#{grade},#{studentId})
    </insert>
    <!--//根据学生学号查找学生-->
    <!--Student findStudentByStudentId(long studentId);-->
    <select id="findStudentByStudentId" resultType="com.lmj.school.model.Student">
        SELECT * FROM student where studentId=#{studentId}
    </select>
    <!--初始化余额-->
    <insert id="initBalance">
        insert into balance values(null,#{sid},0,0)
    </insert>
    <!--//查找所有的学生学生信息-->
    <!--StudentInfo findStudentInfo();-->
    <select id="findStudentInfo" resultType="com.lmj.school.model.StudentInfo">
        select s.id,s.studentName,s.major,s.sex,s.grade,s.studentId,b.hotWaterBalance,b.foodBalance from student s,balance b where s.id=b.sid;
    </select>
    <!--//保存饭卡订单-->
    <!--void saveFoodOrders(Orders orders);-->
    <insert id="saveFoodOrders">
        insert into orders values(null,#{studentId},#{investType},#{money},#{spendtTime},#{aid})
    </insert>
    <!--//发现饭卡订单-->
    <!--List<OrderInfo> findOrderInfo();-->
    <select id="findOrderInfo" resultType="com.lmj.school.model.OrderInfo">
        select o.aid,o.money,o.investType,o.spendTime,s.studentName from orders o,student s where  o.studentId=s.studentId
    </select>
    <!--//根据订单id查找订单-->
    <!--Orders findOrderById(int id);-->
    <select id="findOrderById" resultType="com.lmj.school.model.Orders">
        select * from orders where id=#{id}
    </select>
    <!--//根据id查找管理员名;-->
    <!--String findAdminNameById(int id);-->
    <select id="findAdminNameById" resultType="string">
        select adminName from admin where id=#{id}
    </select>
</mapper>
